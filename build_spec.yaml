version: 0.1
component: build
timeoutInSeconds: 6000
runAs: root
shell: bash
env:
  # these are local variables to the build config
  variables:
    
  vaultVariables:
  #  EXAMPLE_SECRET: "YOUR-SECRET-OCID"
  
  # exportedVariables are made available to use as parameters in sucessor Build Pipeline stages
  # For this Build to run, the Build Pipeline needs to have a BUILDRUN_HASH parameter set
  exportedVariables:
   #To share variable to futher stage

steps:
  - type: Command
    name: "Display all folders"
    timeoutInSeconds: 40
    command: |
      ls -ltr ${OCI_PRIMARY_SOURCE_DIR}


  - type: Command
    timeoutInSeconds: 600
    name: "Into a specific resource path"
    command: |
      echo "In to Path - ${TF_PROVIDER_PATH}/${TF_RESOURC_REFERENCE}"
      ls -ltr ${OCI_PRIMARY_SOURCE_DIR}/${TF_PROVIDER_PATH}/${TF_RESOURC_REFERENCE}

    onFailure:
      - type: Command
        command: |
          echo "Handling Failure"
          echo "Failure successfully handled"
        timeoutInSeconds: 40
        runAs: root

